<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../Images/logo_SIE.png">
    <link rel="stylesheet" href="../Styles/home_user_styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <title>SIE | Trabajo</title>
</head>
<body>

    <div id="loading-overlay" style="display: flex; justify-content: center; align-items: center; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.9); z-index: 9999;">
        <p>Cargando...</p>
    </div>

    <div class="modal-overlay" id="modal-overlay-profile">
        <div class="modal-content">
            <h3>Informacion y Datos Personales</h3>
            <p><strong>Nombre y Apellido :</strong> <span id="modal-name"></span></p>
            <p><strong>Usuario :</strong> <span id="modal-user"></span></p>
            <p><strong>Contraseña :</strong> <span id="modal-password"></span></p>
            <p><strong>Rol: </strong> <span id="modal-rol"></span></p>
            <div class="modal-buttons">
                <button class="modal-button close-button">Cerrar</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal-content">
            <h3>Detalles de la Actividad</h3>
            <p><strong>Fecha del día:</strong> <span id="modal-date"></span></p>
            <p><strong>Hora de inicio:</strong> <span id="modal-start-time"></span></p>
            <p><strong>Hora de finalización:</strong> <span id="modal-end-time"></span></p>
            <p><strong>Tiempo de Actividad:</strong> <span id="modal-duration"></span></p>
            <div class="modal-buttons">
                <button class="modal-button confirm-button">Confirmar</button>
                <button class="modal-button cancel-button">Cancelar</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="modal-overlay-history">
        <div class="modal-content">
            <h3>Historial de Horarios</h3>
            <div class="table-container">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Fecha</th>
                            <th scope="col">Hora de Ingreso</th>
                            <th scope="col">Hora de Salida</th>
                        </tr>
                    </thead>
                    <tbody id="history-table-body">
                    </tbody>
                </table>
            </div>
            <div class="modal-buttons">
                <button class="modal-button close-history-button">Cerrar</button>
            </div>
        </div>
    </div>
    <nav class="navbar">
        <div class="navbar-saludo">
            <span>Hola, [userName] !</span>
        </div>
        <button class="navbar-toggle" aria-label="Toggle navigation">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <ul class="navbar-menu">
            <li><a href="#">Inicio</a></li>
            <li id="li-profile">Perfil</a></li>
            <li id="li-history">Historial de Horarios</li>
            <li><a href="#">Cerrar sesión</a></li>
        </ul>
    </nav>
    <div class="main-content">
        <div class="counter-container">
            <h2 id="activity-name">Tiempo de Actividad</h2>
            <div class="timer" id="timer">00:00:00</div>
        </div>
        <div class="button-container">
            <button class="action-button start-button" id="start-button">
                Iniciar Actividad
            </button>
            <button class="action-button end-button" id="end-button" disabled>
                Finalizar Actividad
            </button>
        </div>
    </div>
    <!-- Modal para mostrar ubicación en tiempo real -->
    <div class="modal-overlay" id="modal-overlay-location" style="display: none;">
        <div class="modal-content" style="max-width: 500px; width: 90%;">
            <h3>📍 Mi Ubicación Actual</h3>
            <div id="location-info">
                <p id="coordinates-display">Obteniendo ubicación...</p>
            </div>
            <div id="map-container" style="width: 100%; height: 300px; margin: 15px 0; border-radius: 8px; overflow: hidden;">
                <iframe id="location-map"
                        width="100%"
                        height="300"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy">
                </iframe>
            </div>
            <div class="modal-buttons">
                <button class="modal-button close-location-button" id="close-modal">Cerrar</button>
            </div>
        </div>
    </div>
    <button id=ver-ubicacion-actual class="action-button ubicacion-button">
        📍 Ver Mi Ubicacion Actual
    </button>
    <footer class="footer">
        <p>&copy; 2025 SIE | Servicios Empresariales</p>
        <div class="developer-credit">
            <p>Desarrollado por Gonzalo Sanchez</p>
        </div>
    </footer>
    <script type="module" src="../Scripts/home_user_script.js"></script>
</body>
</html>